# 1. Use prebuilt Selenium Standalone Chrome image
FROM selenium/standalone-chrome:latest

# 2. Set working directory inside container
WORKDIR /app

# 3. Switch to root to install Maven
USER root
RUN apt-get update && apt-get install -y maven && rm -rf /var/lib/apt/lists/*

# 4. Switch back to default selenium user
USER seluser

# 5. Copy pom.xml and download dependencies
COPY pom.xml .
RUN mvn -q -B -DskipTests dependency:go-offline

# 6. Copy source code
COPY src ./src

# 7. Default command: run all tests
CMD ["mvn", "-q", "-B", "test"]




Explanation of lines

FROM selenium/standalone-chrome:latest

Prebuilt container with Java, Chrome, and Selenium installed.

WORKDIR /app

All commands (COPY, RUN, CMD) will be relative to /app.

USER root + RUN apt-get install -y maven

Install Maven so you can run mvn test inside the container.

USER seluser

Return to default non-root user for security (prebuilt Selenium images use this user).

COPY pom.xml . + RUN mvn dependency:go-offline

Pre-download dependencies without running tests. Makes Docker caching efficient.

COPY src ./src

Copy your test source code into the container.

CMD ["mvn", "-q", "-B", "test"]

Run all TestNG tests automatically when container starts.